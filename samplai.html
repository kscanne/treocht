<div class="foirm">
  <div class="treoracha">Roinnt de na samplaí is spéisiúla!</div>
  <div class="uicol">
    Treochtaí:</br>
    <a href="javascript:void(0);" onclick="return processClick('ag|agus|an|ar|na','treocht');">ag v. agus v. an v. ar v. na</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('aiteach','treocht');">aiteach</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('ardteist','treocht');">ardteist</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('Breatimeacht|Sasamach|Brexit','treocht');">Breatimeacht v. Sasamach v. Brexit</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('Cásca','treocht');">Cásca</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('crogall|Ultais','treocht');">crogall v. Ultais</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('cúlstad|cúlstop|teorainn','treocht');">cúlstad v. cúlstop v. teorainn</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('earrach|fómhar|geimhreadh|samhradh','treocht');">earrach v. fómhar v. geimhreadh v. samhradh</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('Facebook|Twitter|Instagram|Snapchat','treocht');">Facebook v. Twitter v. Instagram v. Snapchat</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('faisisteachas|Naitsithe','treocht');">faisisteachas v. Naitsithe</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('féinín|féinphic|selfie','treocht');">féinín v. féinphic v. selfie</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('Fortnite|Minecraft|Pokémon','treocht');">Fortnite v. Minecraft v. Pokémon</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('iomáint|peil|sacar','treocht');">iomáint v. peil v. sacar</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('KNEECAP|Kanye','treocht');">KNEECAP v. Kanye</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('Oilimpeacha|lúthchleas|snámh','treocht');">Oilimpeacha v. lúthchleas v. snámh</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('Oireachtas','treocht');">Oireachtas</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('Peig','treocht');">Peig</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('Pop-Up|scúps','treocht');">Pop-Up v. scúps</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('saoire','treocht');">saoire</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('sneachta|stoirm|báisteach','treocht');">sneachta v. stoirm v. báisteach</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('toghchán','treocht');">toghchán</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('Trump|Farage|Wilders|Bolsonaro','treocht');">Trump v. Farage v. Wilders v. Bolsonaro</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('tweet|tvuít|tuít|giolc','treocht');">tweet v. tvuít v. tuít v. giolc</a><br/>
  </div>
  <div class="uicol">
    Léarscáileanna:</br>
    <a href="javascript:void(0);" onclick="return processClick('amhras|aimhreas','atlas');">amhras v. aimhreas</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('cím|tchím','atlas');">chím v. tchím</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('cloisteáil|cloisint|cluinstin','atlas');">cloisteáil v. cloisint v. cluinstin</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('cuidiú|cabhrú','atlas');">cuidiú v. cabhrú</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('deatach|toit','atlas');">deatach v. toit</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('eicínt|inteacht|éigint','atlas');">eicínt v. inteacht v. éigint</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('eireaball|drioball|ruball','atlas');">eireaball v. drioball v. ruball</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('fágáil|fágaint','atlas');">fágáil v. fágaint</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('feiceáil|feiscint','atlas');">feiceáil v. feiscint</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('feiliúnach|fóirsteanach|oiriúnach','atlas');">feiliúnach v. fóirsteanach v. oiriúnach</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('feirm|feilm','atlas');">feirm v. feilm</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('fosta|freisin','atlas');">fosta v. freisin</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('gasúr|garsún','atlas');">gasúr v. garsún</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('girseach|gearrchaile','atlas');">girseach v. gearrchaile</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('insint|inseacht|inse','atlas');">insint v. inseacht v. inse</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('leanúint|leanacht|leanstan','atlas');">leanúint v. leanacht v. leanstan</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('madra|madadh|mada','atlas');">madra v. madadh v. mada</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('nóiméad|neomat|bomaite','atlas');">nóiméad v. neomat v. bomaite</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('práta|fata','atlas');">práta v. fata</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('préamh|fréamh','atlas');">préamh v. fréamh</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('taisme|timpiste|tionóisc','atlas');">taisme v. timpiste v. tionóisc</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('tosú|tosnú|toiseacht','atlas');">tosú v. tosnú v. toiseacht</a><br/>
    <a href="javascript:void(0);" onclick="return processClick('tuiscint|tuigbheáil','atlas');">tuiscint v. tuigbheáil</a><br/>
  </div>
</div>
<hr/>
<div id="output"></div>
<div id="map"></div>

<script>
  google.charts.load('current', {'packages':['corechart'], 'language': 'ga'});
  function processClick(query, outputType) {
    var XHR = new XMLHttpRequest();

    XHR.onreadystatechange = function(event) {
      if (XHR.readyState == XMLHttpRequest.DONE) {
        if (XHR.status == 200) {
          if (outputType == 'treocht') {
            processTrendsJSON(JSON.parse(event.target.responseText));
          }
          else {
            processMapJSON(JSON.parse(event.target.responseText));
          }
        }
        else {
          var div=document.getElementById("output");
          div.innerHTML=XHR.status.toString()+': '+XHR.statusText;
        }
      }
    };

    XHR.open("POST", 'https://cadhan.com/api/' + outputType + '/1.0');
    XHR.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    XHR.setRequestHeader('Accept','application/json');
    var payload = 'teacs=' + encodeURIComponent(query);
    XHR.send(payload);
  }

  function processTrendsJSON(arr) {
    document.getElementById('map').innerHTML='';
    document.getElementById('map').removeAttribute('style');
    var div=document.getElementById("output");
    div.innerHTML='';
    for(var i=1; i<arr.length; i++) {
      var year = parseInt(arr[i][0].substring(0,4));
      var month = parseInt(arr[i][0].substring(5));
      arr[i][0] = new Date(year, month-1);
	}
    var data = new google.visualization.DataTable();
    data.addColumn('date', 'Dáta');
    for(var i=1; i<arr[0].length; i++) {
      data.addColumn('number', arr[0][i]);
    }
    arr.shift(); // remove header row
    data.addRows(arr);
    // DateFormat doesn't take locale code AFAICT
    var date_formatter = new google.visualization.DateFormat({pattern: "y-MM"});
    date_formatter.format(data, 0);
    var options = {
            width: 800,
            height: 500,
            explorer: {},
           hAxis: {
            format: 'y-MM'
            },
           vAxis: {
            title: 'líon sa milliún focal',
            minValue: 0
            },
          legend: { position: 'bottom' },
          chartArea: {'left':75,'top':13,'width': '75%', 'height': '75%'},
          colors: ['#6B94FA', '#FB766B', '#24E456', '#FD9827', '#8E6CF9']
    };
    var chart = new google.visualization.LineChart(div);
    chart.draw(data,options);
    }

  function processMapJSON(arr) {
    document.getElementById("output").innerHTML = '';
    var div = document.getElementById('map');
    div.style.height = "700px";
    div.style.width = "520px";
    div.style.overflow = "hidden";
    div.style.float = "left";
    div.style.border = "thin solid #333";
    var map = new google.maps.Map(document.getElementById('map'), {
       center: new google.maps.LatLng(53.45,-7.9),
       zoom: 7,
       mapTypeId: 'terrain'
    });
    for (var i=0; i < arr.length; i++) {
      var marker = new google.maps.Marker({
        position: arr[i]['coords'],
        map: map,
        title: arr[i]['label'],
        icon: 'pic/' + arr[i]['color'] + '.png'
       });
    }
  }
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCbvTaQOUkXHtNGagDGR2-rrcfEC4yYUrE&language=ga&region=IE"></script>
